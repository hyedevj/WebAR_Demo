<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no, viewport-fit=cover">
  <title>WebAR 질감 실험</title>

  <!-- A-Frame -->
  <script src="https://aframe.io/releases/1.5.0/aframe.min.js"></script>
  <!-- AR.js -->
  <script src="https://cdn.jsdelivr.net/gh/AR-js-org/AR.js/aframe/build/aframe-ar.min.js"></script>
  <!-- noUiSlider -->
  <link href="https://cdn.jsdelivr.net/npm/nouislider@15.7.0/dist/nouislider.min.css" rel="stylesheet">
  <script src="https://cdn.jsdelivr.net/npm/nouislider@15.7.0/dist/nouislider.min.js"></script>

  <link rel="stylesheet" href="style.css">
</head>
<body>

  <!-- 제목 -->
  <div id="title">WebAR 모델 질감 실험</div>

  <!-- 클릭 안내 -->
  <div id="instructions" onclick="startAR()">클릭하시오</div>

  <!-- UI 버튼/슬라이더 -->
  <div class="controls" style="display:none;">
    <h3>질감 선택</h3>
    <button onclick="setTexture('smooth')">매끈</button>
    <button onclick="setTexture('rough')">거침</button>
    <button onclick="setTexture('reflect')">반사</button>

    <h3>광량 범위 조절</h3>
    <div id="lightRange"></div>
  </div>

  <!-- AR 장면 -->
  <a-scene
    vr-mode-ui="enabled: false"
    renderer="logarithmicDepthBuffer: true;"
    arjs="trackingMethod: best; sourceType: webcam; debugUIEnabled: false;"
  >
    <!-- 텍스처 -->
    <a-assets>
    <!-- Reflect -->
      <img id="textReflectColor" src="textures/reflect/Color.jpg">
      <img id="textReflectDisplacement" src="textures/reflect/Displacement.jpg">
      <img id="textReflectMetalness" src="textures/reflect/Metalness.jpg">
      <img id="textReflectRoughness" src="textures/reflect/Roughness.jpg">
      <img id="textReflectNormalDX" src="textures/reflect/NormalDX.jpg">
      <img id="textReflectNormalGL" src="textures/reflect/NormalGL.jpg">

      <!-- Rough (Color만) -->
      <img id="texRoughColor" src="textures/rough.jpg">

      <!-- Smooth -->
      <img id="textSmoothColor" src="textures/smooth.jpg">
    </a-assets>

    <!-- Sphere -->
    <a-sphere
      id="arSphere"
      radius="0.5"
      position="0 0 -2"
      scale="1 1 1"
      visible="false"
      material="src: #texSmoothColor; normalMap: #texSmoothNormal; roughnessMap: #texSmoothRough; metalnessMap: #texSmoothMetal;"
    ></a-sphere>

    <!-- 광원 -->
    <a-entity
      id="sceneLight"
      light="type: directional; color: white; intensity: 1"
      position="1 3 2"
    ></a-entity>

    <a-entity camera></a-entity>
  </a-scene>

  <script src="script.js"></script>
</body>
</html>
